
## Introduction

Waypoint flight function, as an important technology of drone automation operation scenarios, is one of the core functions that users and developers attach to the most attention. With the popularity of drone automation, route data has quickly become an important digital asset for users and developers. However, for a long time in the past, routes could only be edited and executed on a single device, and it was difficult to apply across devices and models; the route file format was not open or shared, making it difficult for users to independently complete secondary editing and business tuning work. In line with the vision of liberating repetitive productivity for the industry and users, leading the drone industry to a new era of automation, and promoting the assetization of route data, we officially released the route file format standard-WPML.

## What's WPML

WPML is the abbreviation of **W**ay**P**oint **M**arkup **L**anguage, which is the Route File Format Standard. The WPML route file format standard is extended based on the definition of KML (Keyhole Markup Language). WPML route files follow KMZ filing requirements and all route files end with a “.kmz” suffix. WPML route file format standard, as the carrier of route digital assets, has the following advantages:

* Open: WPML's definitions are shared publicly. Route files are archived using file packages, and paths are described in markup language, which is highly scalable. Users and developers can continue to add business data based on the open principle without restriction.
* Easy to read: WPML uses the most basic XML markup language format and media file format to describe routes. Users and developers can read and write resources such as path definition and route media without relying on any parsing software.
* Inheritance: WPML will continue to iterate as a route file format standard and maintain intergenerational compatibility according to protocol rules. Route files in the hands of users and developers can become digital assets, which can be directly applied and continuously inherited between different devices and models.

Based on the open principle of WPML, users and developers are welcome to put forward suggestions and suggestions for improvement. Let's transcend the future of drone automation applications together!

## How to Use WPML

WPML route files all end with a ".kmz" suffix and are essentially archive files packed in ZIP format. After decompression of a standard WPML route file, its file structure is as follows:

<div align=center>
<img src="https://terra-1-g.djicdn.com/84f990b0bbd145e6a3930de0c55d3b2b/admin/doc/721986d3-18dc-416e-9c13-a8f13b02935b.png" style="width:auto"/>
</div>

The `template.kml` file is referred to as the "template file". Predefined templates provide a convenient means for users to edit and plan routes. For example, when surveying and mapping users use the mapping aerial template, they do not need to carefully describe the path of each route, but only need to define the surveying and mapping area and overlap rate, which can be generated by DJI Pilot 2, DJI Flighthub 2 or other software and finally provided to the drone. The path and action to execute.

And the `waylines.wpml` file is called the "execution file". The executive file defines clear drone flight and payload action instructions. These commands are generated by DJI Pilot 2, DJI Flighthub 2 or other software. These softwares read the template parameters in `template.kml`, combined with the calculation of the path generation algorithm, and finally generates the `waylines.wpml` file for execution.

The `res` resource folder contains auxiliary resources required for the wayline. For example, the pre-prepared reference target photos for the AI Spot-Check.

The `template.kml`, `waylines.wpml` and `res` resource folders are all part of the route file format standard. `template.kml` defines business attributes, which are convenient for users to quickly adjust and edit; `waylines.wpml` defines execution details; `res` folder stores auxiliary resource files.

The fields of DJI WPML are introduced as follows:
* The fields used only in `template.kml` file are introduced in [Template.kml](https://developer.dji.com/doc/cloud-api-tutorial/en/api-reference/dji-wpml/template-kml.html).
* The fields used only in `waylines.wpml` file are introduced in [Waylines.wpml](https://developer.dji.com/doc/cloud-api-tutorial/en/api-reference/dji-wpml/waylines-wpml.html).
* Common fields for `template.kml` file and `waylines.wpml` file are introduced in [Common Elements](https://developer.dji.com/doc/cloud-api-tutorial/en/api-reference/dji-wpml/common-element.html).

**Note:**

1. Please follow this specification for the naming of each file or folder in the route file, otherwise the route file may fail to be read.
2. The route name is the file name of the route file. For example, the route name of `new_waypoints.kmz` is `new_waypoints`. 


## Existing route change

For the existing route files of the M300 RTK, you can upgrade to WPML route files by importing them into the new version of DJI Pilot 2 and saving them again.

*Note: The route format conversion library is not yet available. Developers who need it can convert it based on DJI Pilot 2, or generate it based on the WPML route file format standard.*